{"version":3,"file":"index.umd.js","sources":["../src/defined.js","../src/interval.js","../src/betweener.js","../src/buildEnum.js","../src/charkeys.js","../src/clipper.js","../src/flattener.js","../src/hasAllKeys.js","../src/hasAllCharkeys.js","../src/indexer.js","../src/indexById.js","../src/omitter.js","../src/randomInt.js","../src/rounder.js","../src/singleton.js","../src/upto.js"],"sourcesContent":["export default function defined (val) {\n  return (typeof val !== 'undefined');\n}\n","import defined from './defined';\n\nconst interval_regex = /(?<left>[[(])\\s*(?<left_num>[+-]?([0-9]+([.][0-9]*)?|([.][0-9]+)|∞))\\s*,\\s*(?<right_num>[+-]?([0-9]+([.][0-9]*)?|([.][0-9]+)|∞))\\s*(?<right>[)\\]])/;\n\nexport default function interval (arg) {\n  if (arg.constructor === String) {\n    const match = arg.match(interval_regex);\n    if (!match) {\n      throw new Error('Invalid interval string');\n    }\n\n    const {left, left_num, right_num, right} = match.groups;\n    const map = {\n      '[': 'gte',\n      '(': 'gt',\n      ')': 'lt',\n      ']': 'lte'\n    };\n\n    const bounds = [left_num, right_num].map((num)=> {\n      if (num === '-∞') {\n        return -Infinity;\n      } else if (num === '∞') {\n        return Infinity;\n      } else {\n        return parseFloat(num);\n      }\n    });\n\n    arg = {\n      [map[left]]: bounds[0],\n      [map[right]]: bounds[1]\n    };\n  }\n\n  if (Array.isArray(arg)) {\n    const [min, max] = arg;\n    arg = {\n      gte: min,\n      lte: max\n    };\n  }\n\n  const has_gt = defined(arg.gt);\n  const has_gte = defined(arg.gte);\n  const has_lt = defined(arg.lt);\n  const has_lte = defined(arg.lte);\n\n  const has_both_g = (has_gt && has_gte);\n  const has_both_l = (has_lt && has_lte);\n  const has_one = (has_gt || has_gte || has_lt || has_lte);\n\n  if (has_both_g || has_both_l || !has_one) {\n    throw new Error('Invalid interval');\n  }\n\n  return arg;\n}\n","import interval from './interval';\nimport defined from './defined';\n\nexport default function betweener (arg) {\n  const {lt, lte, gt, gte} = interval(arg);\n\n  return function between (value) {\n    if (defined(gt) && (value <= gt)) {\n      return false;\n    }\n    if (defined(gte) && (value < gte)) {\n      return false;\n    }\n    if (defined(lt) && (value >= lt)) {\n      return false;\n    }\n    if (defined(lte) && (value > lte)) {\n      return false;\n    }\n    return true;\n  };\n}\n","export default function buildEnum (types) {\n  return types.reduce((Types, type)=> {\n    Types[type] = type;\n    return Types;\n  }, {});\n}\n","export default function charkeys (obj) {\n  return Object.entries(obj).reduce((singled, [key, val])=> {\n    const k = key[0];\n    singled[k] = val;\n    return singled;\n  }, {});\n}\n","import interval from './interval';\nimport defined from './defined';\n\nconst {MIN_VALUE} = Number;\n\nexport default function clipper (arg) {\n  const {lt, lte, gt, gte} = interval(arg);\n\n  return function constrain (value) {\n    if (defined(gt) && (value <= gt)) {\n      return gt + MIN_VALUE;\n    }\n    if (defined(gte) && (value < gte)) {\n      return gte;\n    }\n    if (defined(lt) && (value >= lt)) {\n      return lt - MIN_VALUE;\n    }\n    if (defined(lte) && (value > lte)) {\n      return lte;\n    }\n    return value;\n  };\n}\n","export default function flattener ({join = '.', into = {}} = {}) {\n  return function flatten (obj, key = null) {\n    if (obj && obj.constructor === Object) {\n      const entries = Object.entries(obj);\n      if (entries.length) {\n        for (const [k, v] of entries) {\n          const parts = key ? [key, k] : [k];\n          const new_key = parts.join(join);\n          flatten(v, new_key);\n        }\n      } else {\n        into[key] = {};\n      }\n    } else {\n      into[key] = obj;\n    }\n    return into;\n  };\n}\n","export default function hasAllKeys (keys) {\n  return function hasAll (obj) {\n    return keys.every((key)=> {\n      return Object.prototype.hasOwnProperty.call(obj, key);\n    });\n  };\n}\n","import charkeys from './charkeys';\nimport hasAllKeys from './hasAllKeys';\n\nexport default function hasAllCharkeys (keys) {\n  return function has (obj) {\n    obj = charkeys(obj);\n    return hasAllKeys(keys)(obj);\n  };\n}\n","import buildEnum from './buildEnum';\n\nconst types = buildEnum(['array', 'first', 'last']);\n\nexport default function indexer (arg) {\n  if (!arg) {\n    arg = {\n      attr: 'id',\n      type: types.first\n    };\n  }\n\n  if (arg.constructor === String) {\n    arg = {\n      attr: arg\n    };\n  }\n\n  const {\n    attr,\n    type = types.array\n  } = arg;\n\n  if (!(type in types)) {\n    throw new Error('Invalid index type');\n  }\n\n  return function index (items) {\n    const index = {};\n    for (const item of items) {\n      const value = item[attr];\n      const has_value = (value in index);\n      if (type === types.array) {\n        if (!has_value) {\n          index[value] = [];\n        }\n        index[value].push(item);\n      } else if (type === types.first) {\n        if (!has_value) {\n          index[value] = item;\n        }\n      } else {\n        index[value] = item;\n      }\n    }\n    return index;\n  };\n}\n\nfor (const [k, v] of Object.entries(types)) {\n  indexer[k] = v;\n}\n","import indexer from './indexer';\n\nconst indexById = indexer();\nexport default indexById;\n","export default function omitter (keys) {\n  let test;\n  if (Array.isArray(keys)) {\n    test = (key)=> keys.includes(key);\n  } else {\n    test = keys;\n  }\n  return function omit (obj) {\n    return Object.entries(obj).reduce((result, [key, value])=> {\n      if (!test(key, value)) {\n        result[key] = obj[key];\n      }\n      return result;\n    }, {});\n  };\n}\n","const {isInteger} = Number;\n\nexport default function randomInt (arg = {}) {\n  if (Array.isArray(arg)) {\n    const [min, max] = arg;\n    arg = {min, max};\n  } else if (isInteger(arg)) {\n    arg = {\n      max: arg\n    };\n  }\n  const {min = 0, max = 1} = arg;\n\n  if (!isInteger(min) || !isInteger(max)) {\n    throw new Error('min and max must be integers');\n  }\n  if (max < min) {\n    throw new Error('min must be less than or equal to max');\n  }\n\n  const delta = max - min;\n  const offset = Math.floor(Math.random() * (delta + 1));\n  return min + offset;\n}\n","export default function rounder ({decimals = 0, op = Math.round} = {}) {\n  if (!(Number.isInteger(decimals) && (decimals >= 0))) {\n    throw new Error('Argument decimals must be non-negative integer');\n  }\n\n  if (!(op && (op.constructor === Function))) {\n    throw new Error('Argument op must be a function');\n  }\n\n  const multiplier = 10 ** decimals;\n  return function round (num) {\n    return op(num * multiplier) / multiplier;\n  };\n}\n","export default function singleton (args) {\n  if (args && (args.constructor === Function)) {\n    args = {\n      Class: args\n    };\n  }\n\n  if (!args || !args.Class) {\n    throw new Error('Must pass constructor or object with \"Class\" prop');\n  }\n\n  const {\n    Class,\n    instance = 'instance',\n    key = '_instance'\n  } = args;\n\n  Class[instance] = function instance (...args) {\n    if (!this[key]) {\n      this[key] = new this(...args);\n    }\n    return this[key];\n  };\n}\n","/// iterable that returns array or function\n\nexport default function upto (n) {\n  let i = 0;\n  const results = [];\n  return function f (fn) {\n    while (i <= n) {\n      results.push(fn(i));\n      i++;\n    }\n    return results;\n  };\n}\n"],"names":["defined","val","interval_regex","interval","arg","constructor","String","match","Error","left","left_num","right_num","right","groups","map","bounds","num","Infinity","parseFloat","Array","isArray","min","max","gte","lte","has_gt","gt","has_gte","has_lt","lt","has_lte","has_both_g","has_both_l","has_one","betweener","between","value","buildEnum","types","reduce","Types","type","charkeys","obj","Object","entries","singled","key","k","MIN_VALUE","Number","clipper","constrain","flattener","join","into","flatten","length","v","parts","new_key","hasAllKeys","keys","hasAll","every","prototype","hasOwnProperty","call","hasAllCharkeys","has","indexer","attr","first","array","index","items","item","has_value","push","indexById","omitter","test","includes","omit","result","isInteger","randomInt","delta","offset","Math","floor","random","rounder","decimals","op","round","Function","multiplier","singleton","args","Class","instance","upto","n","i","results","f","fn"],"mappings":"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"}