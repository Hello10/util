{"version":3,"file":"index.js","sources":["../src/array.js","../src/defined.js","../src/interval.js","../src/betweener.js","../src/bit.js","../src/buildEnum.js","../src/capitalize.js","../src/mapo.js","../src/charkeys.js","../src/clipper.js","../src/flattener.js","../src/hasAllKeys.js","../src/hasAllCharkeys.js","../src/hasExactKeys.js","../src/indexer.js","../src/indexById.js","../src/isFunction.js","../src/mapp.js","../src/nonempty.js","../src/now.js","../src/omitter.js","../src/randomInt.js","../src/rounder.js","../src/singleton.js","../src/sleep.js","../src/upto.js"],"sourcesContent":["export default function makeArray (...args) {\n  let a;\n  if (args.length > 1) {\n    a = args;\n  } else {\n    const value = args[0];\n    if (value && value.unwrap) {\n      a = value;\n    } else if (Array.isArray(value)) {\n      a = [...value];\n    } else if ([null, undefined].includes(value)) {\n      a = [];\n    } else {\n      a = [value];\n    }\n  }\n\n  function _compare (x, y) {\n    if (a.compare) {\n      return a.compare(x, y);\n    } else {\n      return (x === y);\n    }\n  }\n\n  function array (args) {\n    const result = makeArray(args);\n    if (a.compare) {\n      result.compare = a.compare;\n    }\n    return result;\n  }\n\n  function _getIndex (args) {\n    if (Number.isInteger(args)) {\n      return args;\n    } else {\n      const has_index = 'index' in args;\n      const has_element = 'element' in args;\n      const has_one_key = Object.keys(args).length === 1;\n      if ((has_index || has_element) && has_one_key) {\n        const {index: i, element} = args;\n        return has_index ? i : index(element);\n      } else {\n        return index(args);\n      }\n    }\n  }\n\n  function _diff ({dir, other}) {\n    function notIn (arr) {\n      return (el)=> (\n        a.compare ? !arr.some((e)=> a.compare(el, e)) : !arr.includes(el)\n      );\n    }\n    const [from, to] = (dir === 'from') ? [a, other] : [other, a];\n    const add = array(from.filter(notIn(to)));\n    const remove = array(to.filter(notIn(from)));\n    return {add, remove};\n  }\n\n  function add (element) {\n    return array([...a, element]);\n  }\n\n  function contains (el) {\n    if (a.compare) {\n      return a.some((e)=> a.compare(e, el));\n    } else {\n      return a.includes(el);\n    }\n  }\n\n  function diffFrom (other) {\n    return _diff({dir: 'from', other});\n  }\n\n  function diffTo (other) {\n    return _diff({dir: 'to', other});\n  }\n\n  function empty () {\n    return (a.length === 0);\n  }\n\n  function equals (b) {\n    return a.every((ae, index)=> {\n      const be = b[index];\n      return _compare(ae, be);\n    });\n  }\n\n  function sameSet (b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    function hasAll (x, y) {\n      return x.every((xe)=> {\n        return y.some((ye)=> _compare(xe, ye));\n      });\n    }\n\n    return hasAll(a, b) && hasAll(b, a);\n  }\n\n  function first () {\n    return a[0];\n  }\n\n  function index (element) {\n    if (a.compare) {\n      return a.findIndex((e)=> a.compare(e, element));\n    } else {\n      return a.indexOf(element);\n    }\n  }\n\n  function insert (args) {\n    const has_left = 'left' in args;\n    const has_right = 'right' in args;\n    const has_replace = 'replace' in args;\n\n    const {left, right, replace, ...split_args} = args;\n    const [before, element, after] = splitCenter(split_args);\n\n    let center;\n    if (has_left && has_right) {\n      center = [left, element, right];\n    } else if (has_left) {\n      center = [left, element];\n    } else if (has_right) {\n      center = [element, right];\n    } else if (has_replace) {\n      center = [replace];\n    }\n\n    return array([...before, ...center, ...after]);\n  }\n\n  function last () {\n    return a[a.length - 1];\n  }\n\n  function remove (args) {\n    const [before, after] = split(args);\n    return array([...before, ...after]);\n  }\n\n  function replace ({by: replace, ...args}) {\n    return insert({replace, ...args});\n  }\n\n  function rest () {\n    return array(a.slice(1));\n  }\n\n  function split (args) {\n    const parts = splitCenter(args);\n    const before = parts.shift();\n    const after = parts.pop();\n    return [before, after];\n  }\n\n  function splitCenter (args) {\n    const i = _getIndex(args);\n    const element = a[i];\n    const before = a.slice(0, i);\n    const after = a.slice(i + 1);\n    return [\n      array(before),\n      element,\n      array(after)\n    ];\n  }\n\n  function splitLeft (args) {\n    const [before, element, after] = splitCenter(args);\n    before.push(element);\n    return [before, after];\n  }\n\n  function splitRight (args) {\n    const [before, element, after] = splitCenter(args);\n    after.unshift(element);\n    return [before, after];\n  }\n\n  function toggle (element) {\n    return contains(element) ? remove({element}) : add(element);\n  }\n\n  function unwrap () {\n    return [...a];\n  }\n\n  if (!a.unwrap) {\n    Object.defineProperties(a, {\n      add: {\n        value: add\n      },\n      contains: {\n        value: contains\n      },\n      diffFrom: {\n        value: diffFrom\n      },\n      diffTo: {\n        value: diffTo\n      },\n      empty: {\n        get: empty\n      },\n      equals: {\n        value: equals\n      },\n      sameSet: {\n        value: sameSet\n      },\n      first: {\n        get: first\n      },\n      index: {\n        value: index\n      },\n      insert: {\n        value: insert\n      },\n      last: {\n        get: last\n      },\n      remove: {\n        value: remove\n      },\n      replace: {\n        value: replace\n      },\n      rest: {\n        get: rest\n      },\n      split: {\n        value: split\n      },\n      splitCenter: {\n        value: splitCenter\n      },\n      splitLeft: {\n        value: splitLeft\n      },\n      splitRight: {\n        value: splitRight\n      },\n      toggle: {\n        value: toggle\n      },\n      unwrap: {\n        value: unwrap\n      }\n    });\n  }\n\n  return a;\n}\n","export default function defined (val) {\n  return (typeof val !== 'undefined');\n}\n","import defined from './defined';\n\nconst interval_regex = /(?<left>[[(])\\s*(?<left_num>[+-]?([0-9]+([.][0-9]*)?|([.][0-9]+)|∞))\\s*,\\s*(?<right_num>[+-]?([0-9]+([.][0-9]*)?|([.][0-9]+)|∞))\\s*(?<right>[)\\]])/;\n\nexport default function interval (arg) {\n  if (arg.constructor === String) {\n    const match = arg.match(interval_regex);\n    if (!match) {\n      throw new Error('Invalid interval string');\n    }\n\n    const {left, left_num, right_num, right} = match.groups;\n    const map = {\n      '[': 'gte',\n      '(': 'gt',\n      ')': 'lt',\n      ']': 'lte'\n    };\n\n    const bounds = [left_num, right_num].map((num)=> {\n      if (num === '-∞') {\n        return -Infinity;\n      } else if (num === '∞') {\n        return Infinity;\n      } else {\n        return parseFloat(num);\n      }\n    });\n\n    arg = {\n      [map[left]]: bounds[0],\n      [map[right]]: bounds[1]\n    };\n  }\n\n  if (Array.isArray(arg)) {\n    const [min, max] = arg;\n    arg = {\n      gte: min,\n      lte: max\n    };\n  }\n\n  const has_gt = defined(arg.gt);\n  const has_gte = defined(arg.gte);\n  const has_lt = defined(arg.lt);\n  const has_lte = defined(arg.lte);\n\n  const has_both_g = (has_gt && has_gte);\n  const has_both_l = (has_lt && has_lte);\n  const has_one = (has_gt || has_gte || has_lt || has_lte);\n\n  if (has_both_g || has_both_l || !has_one) {\n    throw new Error('Invalid interval');\n  }\n\n  return arg;\n}\n","import interval from './interval';\nimport defined from './defined';\n\nexport default function betweener (arg) {\n  const {lt, lte, gt, gte} = interval(arg);\n\n  return function between (value) {\n    if (defined(gt) && (value <= gt)) {\n      return false;\n    }\n    if (defined(gte) && (value < gte)) {\n      return false;\n    }\n    if (defined(lt) && (value >= lt)) {\n      return false;\n    }\n    if (defined(lte) && (value > lte)) {\n      return false;\n    }\n    return true;\n  };\n}\n","export default function bit (value) {\n  return value ? 1 : 0;\n}\n","export default function buildEnum (types) {\n  return types.reduce((Types, type)=> {\n    Types[type] = type;\n    return Types;\n  }, {});\n}\n","export default function capitalize (string) {\n  const first = string.charAt(0).toUpperCase();\n  const rest = string.slice(1);\n  return `${first}${rest}`;\n}\n","export default function mapo ({\n  key: mapkey,\n  value: mapval\n}) {\n  return function map (obj) {\n    const entries = Object.entries(obj);\n    const mapped = entries.map(([key, value])=> {\n      if (mapkey) {\n        key = mapkey({key, value});\n      }\n      if (mapval) {\n        value = mapval({key, value});\n      }\n      return [key, value];\n    });\n    return Object.fromEntries(mapped);\n  };\n}\n","import mapo from './mapo';\n\nconst charkeys = mapo({\n  key: ({key})=> key[0]\n});\n\nexport default charkeys;\n","import interval from './interval';\nimport defined from './defined';\n\nconst {MIN_VALUE} = Number;\n\nexport default function clipper (arg) {\n  const {lt, lte, gt, gte} = interval(arg);\n\n  return function constrain (value) {\n    if (defined(gt) && (value <= gt)) {\n      return gt + MIN_VALUE;\n    }\n    if (defined(gte) && (value < gte)) {\n      return gte;\n    }\n    if (defined(lt) && (value >= lt)) {\n      return lt - MIN_VALUE;\n    }\n    if (defined(lte) && (value > lte)) {\n      return lte;\n    }\n    return value;\n  };\n}\n","export default function flattener ({join = '.', into: into_base} = {}) {\n  return function flatten (obj, key = null, into = into_base || {}) {\n    if (obj && (obj.constructor === Object)) {\n      const entries = Object.entries(obj);\n      if (entries.length) {\n        for (const [k, v] of entries) {\n          const parts = key ? [key, k] : [k];\n          const new_key = parts.join(join);\n          flatten(v, new_key, into);\n        }\n      } else {\n        into[key] = {};\n      }\n    } else {\n      into[key] = obj;\n    }\n    return into;\n  };\n}\n","export default function hasAllKeys (keys) {\n  return function hasAll (obj) {\n    return keys.every((key)=> {\n      return Object.prototype.hasOwnProperty.call(obj, key);\n    });\n  };\n}\n","import charkeys from './charkeys';\nimport hasAllKeys from './hasAllKeys';\n\nexport default function hasAllCharkeys (keys) {\n  return function has (obj) {\n    obj = charkeys(obj);\n    return hasAllKeys(keys)(obj);\n  };\n}\n","import hasAllKeys from './hasAllKeys';\n\nexport default function hasExactKeys (keys) {\n  const hasAll = hasAllKeys(keys);\n  return function hasExact (obj) {\n    const num_keys = Object.keys(obj).length;\n    return (num_keys === keys.length) && hasAll(obj);\n  };\n}\n","import buildEnum from './buildEnum';\n\nconst types = buildEnum(['array', 'first', 'last']);\n\nexport default function indexer (arg) {\n  if (!arg) {\n    arg = {\n      attr: 'id',\n      type: types.first\n    };\n  }\n\n  if (arg.constructor === String) {\n    arg = {\n      attr: arg\n    };\n  }\n\n  const {\n    attr,\n    type = types.array\n  } = arg;\n\n  if (!(type in types)) {\n    throw new Error('Invalid index type');\n  }\n\n  return function index (items) {\n    const index = {};\n    for (const item of items) {\n      const value = item[attr];\n      const has_value = (value in index);\n      if (type === types.array) {\n        if (!has_value) {\n          index[value] = [];\n        }\n        index[value].push(item);\n      } else if (type === types.first) {\n        if (!has_value) {\n          index[value] = item;\n        }\n      } else {\n        index[value] = item;\n      }\n    }\n    return index;\n  };\n}\n\nfor (const [k, v] of Object.entries(types)) {\n  indexer[k] = v;\n}\n","import indexer from './indexer';\n\nconst indexById = indexer();\nexport default indexById;\n","export default function isFunction (fn) {\n  if (!fn) {\n    return false;\n  }\n  return ['Function', 'AsyncFunction'].includes(fn.constructor.name);\n  // TODO: https://github.com/developit/microbundle/issues/721\n  // const AsyncFunction = (async ()=> { return null; }).constructor;\n  // return [Function, AsyncFunction].includes(fn.constructor);\n}\n","export default async function mapp (iterable, map, options = {}) {\n  let concurrency = options.concurrency || Infinity;\n  let index = 0;\n  const results = [];\n  const runs = [];\n  const iterator = iterable[Symbol.iterator]();\n  const sentinel = Symbol('sentinel');\n\n  while (concurrency-- > 0) {\n    const r = run();\n    if (r === sentinel) {\n      break;\n    } else {\n      runs.push(r);\n    }\n  }\n\n  function run () {\n    const {done, value} = iterator.next();\n    if (done) {\n      return sentinel;\n    } else {\n      const i = index++;\n      const p = map(value, i);\n      return Promise.resolve(p)\n        .then((result)=> {\n          results[i] = result;\n          return run();\n        });\n    }\n  }\n\n  return Promise.all(runs).then(()=> results);\n}\n","export default function nonempty (value) {\n  if ((value === null) || (value === undefined)) {\n    return false;\n  }\n  if (value.length !== undefined) {\n    return (value.length > 0);\n  }\n  if (value.constructor === Object) {\n    const keys = Object.keys(value);\n    return (keys.length > 0);\n  }\n  return true;\n}\n","export default function now () {\n  return new Date();\n}\n","export default function omitter (keys) {\n  let test;\n  if (Array.isArray(keys)) {\n    test = (key)=> keys.includes(key);\n  } else {\n    test = keys;\n  }\n  return function omit (obj) {\n    return Object.entries(obj).reduce((result, [key, value])=> {\n      if (!test(key, value)) {\n        result[key] = obj[key];\n      }\n      return result;\n    }, {});\n  };\n}\n","const {isInteger} = Number;\n\nexport default function randomInt (arg = {}) {\n  if (Array.isArray(arg)) {\n    const [min, max] = arg;\n    arg = {min, max};\n  } else if (isInteger(arg)) {\n    arg = {\n      max: arg\n    };\n  }\n  const {min = 0, max = 1} = arg;\n\n  if (!isInteger(min) || !isInteger(max)) {\n    throw new Error('min and max must be integers');\n  }\n  if (max < min) {\n    throw new Error('min must be less than or equal to max');\n  }\n\n  const delta = max - min;\n  const offset = Math.floor(Math.random() * (delta + 1));\n  return min + offset;\n}\n","export default function rounder ({decimals = 0, op = Math.round} = {}) {\n  if (!(Number.isInteger(decimals) && (decimals >= 0))) {\n    throw new Error('Argument decimals must be non-negative integer');\n  }\n\n  if (!(op && (op.constructor === Function))) {\n    throw new Error('Argument op must be a function');\n  }\n\n  const multiplier = 10 ** decimals;\n  return function round (num) {\n    return op(num * multiplier) / multiplier;\n  };\n}\n","export default function singleton (args) {\n  if (args && (args.constructor === Function)) {\n    args = {\n      Class: args\n    };\n  }\n\n  if (!args || !args.Class) {\n    throw new Error('Must pass constructor or object with \"Class\" prop');\n  }\n\n  const {\n    Class,\n    instance = 'instance',\n    key = '_instance'\n  } = args;\n\n  Class[instance] = function instance (...args) {\n    if (!this[key]) {\n      this[key] = new this(...args);\n    }\n    return this[key];\n  };\n}\n","export default function sleep (time_ms) {\n  return new Promise((resolve)=> {\n    setTimeout(resolve, time_ms);\n  });\n}\n","/// iterable that returns array or function\n\nexport default function upto (n) {\n  let i = 0;\n  const results = [];\n  return function f (fn) {\n    while (i <= n) {\n      results.push(fn(i));\n      i++;\n    }\n    return results;\n  };\n}\n"],"names":["makeArray","args","a","length","value","unwrap","Array","isArray","undefined","includes","_compare","x","y","compare","array","result","_getIndex","Number","isInteger","has_index","has_element","has_one_key","Object","keys","index","i","element","_diff","dir","other","notIn","arr","el","some","e","from","to","add","filter","remove","contains","diffFrom","diffTo","empty","equals","b","every","ae","be","sameSet","hasAll","xe","ye","first","findIndex","indexOf","insert","has_left","has_right","has_replace","left","right","replace","split_args","before","after","splitCenter","center","last","split","by","rest","slice","parts","shift","pop","splitLeft","push","splitRight","unshift","toggle","defineProperties","get","defined","val","interval_regex","interval","arg","constructor","String","match","Error","left_num","right_num","groups","map","bounds","num","Infinity","parseFloat","min","max","gte","lte","has_gt","gt","has_gte","has_lt","lt","has_lte","has_both_g","has_both_l","has_one","betweener","between","bit","buildEnum","types","reduce","Types","type","capitalize","string","charAt","toUpperCase","mapo","key","mapkey","mapval","obj","entries","mapped","fromEntries","charkeys","MIN_VALUE","clipper","constrain","flattener","join","into","into_base","flatten","k","v","new_key","hasAllKeys","prototype","hasOwnProperty","call","hasAllCharkeys","has","hasExactKeys","hasExact","num_keys","indexer","attr","items","item","has_value","indexById","isFunction","fn","name","mapp","iterable","options","concurrency","results","runs","iterator","Symbol","sentinel","r","run","done","next","p","Promise","resolve","then","all","nonempty","now","Date","omitter","test","omit","randomInt","delta","offset","Math","floor","random","rounder","decimals","op","round","Function","multiplier","singleton","Class","instance","sleep","time_ms","setTimeout","upto","n","f"],"mappings":"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"}